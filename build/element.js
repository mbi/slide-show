/* <slide-show> 
   2.0.0
   By Stephen Band
   Built 2022-04-18 23:04 */

function Q(t){var e=new Map;return function(o){if(e.has(o))return e.get(o);var r=t(o);return e.set(o,r),r}}var Re=Array.prototype;function _e(t,e){return typeof t=="function"?t.apply(null,e):t}function zt(t,e,n){n=n||t.length;var o=n===1?e?t:Q(t):Q(function(r){return zt(function(){var i=[r];return i.push.apply(i,arguments),t.apply(null,i)},e,n-1)});return function r(i){return arguments.length===0?r:arguments.length===1?o(i):arguments.length>=n?t.apply(null,arguments):_e(o(i),Re.slice.call(arguments,1))}}var w=zt;function Ue(t,e){return 1-Math.pow(1-e,t)}var Rt=w(Ue);function h(){}function lt(t,e){return e(t)}function b(t){return t}var Ve=Array.prototype;function at(){let t=arguments;return t.length?e=>Ve.reduce.call(t,lt,e):b}function pt(t,e,n){return n*(e-t)+t}var qe=window.performance,_t=window.requestAnimationFrame,Ne=window.cancelAnimationFrame;function ft(t,e,n){var o=qe.now();function r(s){var u=(s-o)/(t*1e3);u<1?(u>0&&e(u),i=_t(r)):(e(1),n&&n())}var i=_t(r);return function(){Ne(i)}}function J(t,e,n,o,r,i){let s=o[n];return ft(t,at(e,u=>pt(s,r,u),u=>o[n]=u),i)}function We(){return{x:0,y:0,left:0,top:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}}function x(t){return t===window?We():t.getClientRects()[0]||t.getBoundingClientRect()}var B={scrollDuration:.3,scrollDurationPerHeight:.125,scrollTransform:Rt(3)},Ut=h;function Xe(t,e){if(e.behavior==="smooth"){let n=t.style.getPropertyValue("scroll-snap-type"),o=()=>t.style.setProperty("scroll-snap-type",n);if(t.style.setProperty("scroll-snap-type","none"),e.left!==void 0){let r=t===document.body?window.innerWidth:x(t).width,i=B.scrollDuration+B.scrollDurationPerHeight*Math.abs(e.left-t.scrollLeft)/r;Ut=J(i,B.scrollTransform,"scrollLeft",t,e.left,o)}else{let r=t===document.body?window.innerHeight:x(t).height,i=B.scrollDuration+B.scrollDurationPerHeight*Math.abs(e.top-t.scrollTop)/r;Ut=J(i,B.scrollTransform,"scrollTop",t,e.top,o)}}else e.left!==void 0&&(t.scrollLeft=e.left),e.top!==void 0&&(t.scrollTop=e.top)}if(!("scrollBehavior"in document.documentElement.style)){console.log("Polyfilling Element.scrollTo(options).");let t="scrollTo"in Element.prototype?Element:HTMLElement,e=t.scrollIntoView;t.prototype.scrollTo=function(n){typeof n=="object"?Xe(this,n):e.apply(this,arguments)}}function Vt(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object")return!1;let n=Object.keys(t),o=Object.keys(e),r=n.length;for(;r--;){if(t[n[r]]===void 0){if(e[n[r]]!==void 0)return!1}else if(!e.hasOwnProperty(n[r])||!Vt(t[n[r]],e[n[r]]))return!1;let i=o.indexOf(n[r]);i>-1&&o.splice(i,1)}for(r=o.length;r--;)if(e[o[r]]===void 0){if(t[o[r]]!==void 0)return!1}else return!1;return!0}var qt=w(Vt,!0);var Ye=Object.defineProperties,$e=Object.freeze;function Nt(){return this}var dt=$e(Ye([],{shift:{value:h},push:{value:h},each:{value:h},forEach:{value:h},start:{value:h},stop:{value:h},done:{value:h},join:{value:function(){return""}},map:{value:Nt},filter:{value:Nt},reduce:{value:function(t,e){return e}}}));function mt(t){return t&&t[Symbol.iterator]}var Ke=Object.assign;function Ze(t){return t.stop?t.stop():t()}function Qe(t){t.forEach(Ze),t.length=0}function k(){}Ke(k.prototype,{stop:function(){this.stopables&&Qe(this.stopables)},done:function(e){(this.stopables||(this.stopables=[])).push(e)}});var I=Object.assign,C=Object.create,M=Object.defineProperties;function X(t){this.setup=t}I(X.prototype,k.prototype,{pipe:function(t){this.target=t},start:function(){this.setup(this.target,arguments)}});function f(t){if(!f.prototype.isPrototypeOf(this))return new f(t);this.source=typeof t=="function"?new X(t):t,this.source.pipe(this)}I(f,{from:function(t){return new f(t.length?e=>e.push.apply(e,t):h)},of:function(){return this.from(arguments)}});I(f.prototype,{push:function(){let t=this.target,e=arguments.length,n=-1;for(;++n<e;)arguments[n]!==void 0&&t.push(arguments[n]);return this},pipe:function(t){return this.target=t,this.start(),t},start:function(){return this.source.start.apply(this.source,arguments),this},stop:function(){return this.source.stop.apply(this.source,arguments),this},done:function(t){return this.source.done(t),this}});var Xt={source:{writable:!0},target:{writable:!0}},F=I({fn:{value:b}},Xt);function G(t,e,n){F.source.value=t,F.fn.value=n,M(this,F),e.target=this}G.prototype=C(f.prototype);G.prototype.push=function(e){return e=this.fn(e),e!==void 0&&this.target.push(e),this};function z(t,e,n){F.source.value=t,F.fn.value=n,M(this,F),e.target=this}z.prototype=C(f.prototype);z.prototype.push=function(e){return this.fn(e)&&this.target.push(e),this};function R(t,e,n){F.source.value=t,F.fn.value=n,M(this,F),e.target=this}R.prototype=C(f.prototype);R.prototype.push=function(e){let n=this.fn(e);if(n!==void 0)if(mt(n))for(let o of n)o!==void 0&&this.target.push(o);else throw new Error("Cannot .flatMap() non-iterable values");return this};var ht=I({n:{value:0,writable:!0}},Xt);function _(t,e,n){if(typeof n!="number"||n<1)throw new Error("stream.take(n) accepts non-zero positive integers as n ("+n+")");ht.source.value=t,ht.n.value=n,M(this,ht),e.target=this}_.prototype=C(f.prototype);_.prototype.push=function(e){return this.target.push(e),--this.n||this.stop(),this};var A=I({value:{writable:!0}},F);function U(t,e,n,o){A.source.value=t,A.fn.value=n,A.value.value=o,M(this,A),e.target=this,t.start()}U.prototype=C(f.prototype);U.prototype.push=function(e){return e=this.fn(this.value,e),e!==void 0&&(this.value=e),this};function V(t,e,n,o){A.source.value=t,A.fn.value=n,A.value.value=o,M(this,A),e.target=this}V.prototype=C(f.prototype);V.prototype.push=function(e){return e=this.fn(this.value,e),e!==void 0&&(this.value=e,this.target.push(e)),this};var Wt={source:{writable:!0}};function Y(t,e,n){Wt.source.value=t,M(this,Wt),this.push=n,e.target=this,t.start()}Y.prototype=C(f.prototype,{each:{value:null},pipe:{value:null}});var Je=Object.create,Yt=Object.assign;function O(t){this.source=t,this.target=void 0}Yt(O.prototype,k.prototype,{start:function(){let t=this.source,e=t.targets,n=this.target;e.push(n),t.value!==void 0&&n.push(this.source.value),e.length===1&&this.source.source.pipe(this.source)},stop:function(){let t=this.source.targets,e=this.target,n=t.indexOf(e);t.splice(n,1),k.prototype.stop.apply(this,arguments),t.length===0&&this.source.stop()}});function tt(t,e){this.source=t,this.targets=[],this.memorise=!!e}tt.prototype=Yt(Je(f.prototype),{push:function(t){let e=this.targets;if(t!==void 0){let n=-1;for(;e[++n];)e[n].push(t);this.memorise&&(this.value=t)}return this},pipe:function(t){return console.log("TODO: Distributor.pipe()"),t},map:function(t){let e=new O(this);return new G(e,e,t)},filter:function(t){let e=new O(this);return new z(e,e,t)},flatMap:function(t){let e=new O(this);return new R(e,e,t)},reduce:function(t,e){let n=new O(this);return new U(n,n,t,e)},scan:function(t,e){let n=new O(this);return new V(n,n,t,e)},take:function(t){let e=new O(this);return new _(e,e,t)},each:function(t){let e=new O(this);return new Y(e,e,t)}});var tn=Object.assign,$t=Object.keys;function gt(t){return new f(e=>{let n={},o=$t(t),r=!1;function i(s,u){n[s]=u,(r||(r=$t(n).length===o.length))&&e.push(tn({},n))}for(let s in t){let u=t[s];u.each?(u.each(c=>i(s,c)),e.done(u)):u.then?u.then(c=>i(s,c)):console.log("Todo: combine() raw values ?")}})}function wt(t){return new f(e=>{let n=-1,o;for(;o=t[++n];)o.each?(o.each(r=>e.push(r)),e.done(o)):o.then?o.then(r=>e.push(r)):e.push.apply(e,o)})}var vt=Array.prototype;function en(t){return t.length>0}function nn(t,e,n){return t[n]=e.shift(),t}function on(t){return[]}function yt(t,e,n,o){n.push(o),e.every(en)&&t.push(e.reduce(nn,{}))}function bt(t){let e=vt.map.call(t,on);return new f(n=>{vt.forEach.call(t,(o,r)=>{let i=e[r];o.each?n.done(o.each(s=>yt(n,e,i,s))):o.then?o.then(s=>yt(n,e,i,s)):vt.forEach.call(o,s=>yt(n,e,i,s))})})}var Kt=Object.assign;Kt(f,{broadcast:function(e){return f.of().broadcast(e)},combine:function(e){return gt(e)},merge:function(){return wt(arguments)},zip:function(){return bt(arguments)}});Kt(f.prototype,{map:function(t){return new G(this.source,this,t)},filter:function(t){return new z(this.source,this,t)},flatMap:function(t){return new R(this.source,this,t)},reduce:function(t,e){return new U(this.source,this,t,e)},scan:function(t,e){return new V(this.source,this,t,e)},take:function(t){return new _(this.source,this,t)},each:function(t){return new Y(this.source,this,t)},broadcast:function(t){return new tt(this,t&&t.memory)}});var v=f;function y(t,e){return function(){let o=t.apply(this,arguments),r=e[o]||e.default;if(!r)throw new Error('overload() no handler for "'+o+'"');return r.apply(this,arguments)}}var rn=y(b,{is:h,tag:h,html:function(t,e,n){e.innerHTML=n},text:function(t,e,n){e.textContent=n},children:function(t,e,n){e.innerHTML="",n.forEach(o=>{e.appendChild(o)})},points:q,cx:q,cy:q,r:q,preserveAspectRatio:q,viewBox:q,default:function(t,e,n){t in e?e[t]=n:e.setAttribute(t,n)}});function q(t,e,n){e.setAttribute(t,n)}function sn(t,e){for(var n=Object.keys(e),o=n.length;o--;)rn(n[o],t,e[n[o]]);return t}var xt=w(sn,!0);var un="http://www.w3.org/2000/svg",Zt=document.createElement("div");var Qt=(t,e)=>e&&typeof e;function Jt(t,e){let n=document.createRange();return n.selectNode(t),n.createContextualFragment(e)}function E(t,e){var n=document.createElementNS(un,t);return e&&(n.innerHTML=e),n}var cn=y(b,{comment:function(t,e){return document.createComment(e||"")},fragment:y(Qt,{string:function(t,e,n){if(n)return Jt(n,e);let o=document.createDocumentFragment();Zt.innerHTML=e;let r=Zt.childNodes;for(;r[0];)o.appendChild(r[0]);return o},object:function(t,e,n){let o=n?Jt(n):document.createDocumentFragment();return typeof e.length=="number"?o.append.apply(o,e):xt(o,e),o},default:()=>document.createDocumentFragment()}),text:function(t,e){return document.createTextNode(e||"")},circle:E,ellipse:E,g:E,glyph:E,image:E,line:E,rect:E,use:E,path:E,pattern:E,polygon:E,polyline:E,svg:E,default:y(Qt,{string:function(t,e){let n=document.createElement(t);return n.innerHTML=e,n},object:function(t,e){let n=document.createElement(t);return typeof e.length=="number"?n.append.apply(n,e):xt(n,e),n},default:t=>{if(typeof t!="string")throw new Error('create(tag, content) accepts only a string as tag "'+typeof t+'"');return document.createElement(t)}})}),g=cn;function D(t){if(typeof t!="object"||arguments.length>1)throw new Error("delegate() now takes an object of selector:fn pairs.");let e=Object.keys(t);return function(o){let r=o.target,i=-1;for(;e[++i];){let s=r.closest(e[i]);if(s)return t[e[i]](s,...arguments)}}}function Et(t,e,n){let o;typeof n!="string"&&n.input!==void 0&&n.index!==void 0&&(o=n,n=o.input.slice(n.index+n[0].length+(n.consumed||0)));let r=t.exec(n);if(!r)return;let i=e(r);return o&&(o.consumed=(o.consumed||0)+r.index+r[0].length+(r.consumed||0)),i}var ir=w(Et,!0);function ln(t,e,n){throw n.input!==void 0&&n.index!==void 0&&(n=n.input),new Error('Cannot parse string "'+n+'"')}function an(t,e,n){let o=-1;for(;++o<n.length;)e=n[o]!==void 0&&t[o]?t[o](e,n):e;return t.done?t.done(e,n):t.close?t.close(e,n):e}function pn(t,e,n,o){let r=Et(t,i=>an(e,n,i),o);return r===void 0?e.catch?e.catch(n,o):ln(t,e,o):r}var te=w(pn,!0);var St=h;var S=Symbol("internals"),H=Symbol("shadow"),ee=Object.defineProperties,fn={a:HTMLAnchorElement,dl:HTMLDListElement,p:HTMLParagraphElement,br:HTMLBRElement,fieldset:HTMLFieldSetElement,hr:HTMLHRElement,img:HTMLImageElement,li:HTMLLIElement,ol:HTMLOListElement,optgroup:HTMLOptGroupElement,q:HTMLQuoteElement,textarea:HTMLTextAreaElement,td:HTMLTableCellElement,th:HTMLTableCellElement,tr:HTMLTableRowElement,tbody:HTMLTableSectionElement,thead:HTMLTableSectionElement,tfoot:HTMLTableSectionElement,ul:HTMLUListElement},dn={name:{set:function(t){return this.setAttribute("name",t)},get:function(){return this.getAttribute("name")||""}},form:{get:function(){return this[S].form}},labels:{get:function(){return this[S].labels}},validity:{get:function(){return this[S].validity}},validationMessage:{get:function(){return this[S].validationMessage}},willValidate:{get:function(){return this[S].willValidate}},checkValidity:{value:function(){return this[S].checkValidity()}},reportValidity:{value:function(){return this[S].reportValidity()}}},mn={},ne={once:!0},hn=0,oe=!1;function gn(t){return fn[t]||window["HTML"+t[0].toUpperCase()+t.slice(1)+"Element"]||(()=>{throw new Error('Constructor not found for tag "'+t+'"')})()}var wn=te(/^\s*<?([a-z][\w]*-[\w]+)>?\s*$|^\s*<?([a-z][\w]*)\s+is=["']?([a-z][\w]*-[\w]+)["']?>?\s*$/,{1:(t,e)=>({name:e[1]}),2:(t,e)=>({name:e[3],tag:e[2]}),catch:function(t,e){throw new SyntaxError(`dom element() – name must be of the form 'element-name' or 'tag is="element-name"' (`+e+")")}},null);function vn(t,e){if(t.hasOwnProperty(e)){let n=t[e];delete t[e],t[e]=n}return t}function yn(t,e){t._initialLoad=!0;let n=t.attachShadow({mode:e.mode||"closed",delegatesFocus:e.focusable||!1});if(e.stylesheet){let o=g("link",{rel:"stylesheet",href:e.stylesheet});n.append(o)}return t[H]=n,n}function bn(t){var e;if(t.attachInternals){if(e=t.attachInternals(),e.setFormValue)return e}else e={shadowRoot:t.shadowRoot};return e.input=g("input",{type:"hidden",name:t.name}),t.appendChild(e.input),e.setFormValue=function(n){this.input.value=n},e}function xn(t){t._initialAttributes={},t._n=0}function En(t,e,n){let o=t._initialAttributes;for(;t._n<e.length&&o[e[t._n]]!==void 0;)n[e[t._n]].call(t,o[e[t._n]]),++t._n}function re(t,e,n){if(!t._initialAttributes)return;let o=t._initialAttributes;for(;t._n<e.length;)o[e[t._n]]!==void 0&&n[e[t._n]]&&n[e[t._n]].call(t,o[e[t._n]]),++t._n;delete t._initialAttributes,delete t._n}function Sn(t){return!!t.attribute}function Tn(t){return t.set||t.get||t.hasOwnProperty("value")}function ie(t,e){return Sn(e[1])&&(t.attributes[e[0]]=e[1].attribute),Tn(e[1])&&(t.properties[e[0]]=e[1]),t}function Tt(t,e,n){let{name:o,tag:r}=wn(t),i=typeof r=="string"?gn(r):HTMLElement,{attributes:s,properties:u}=n?Object.entries(n).reduce(ie,{attributes:{},properties:{}}):e.properties?Object.entries(e.properties).reduce(ie,{attributes:{},properties:{}}):mn;function c(){let l=Reflect.construct(i,arguments,c),p=e.construct&&e.construct.length>hn?yn(l,e):void 0,d=c.formAssociated&&bn(l);return r&&(oe=!0),e.construct&&e.construct.call(l,p,d),s&&(xn(l),Promise.resolve(1).then(function(){re(l,c.observedAttributes,s)})),u&&Object.keys(u).reduce(vn,l),l}return c.prototype=Object.create(i.prototype,u),u&&u.value&&(c.formAssociated=!0,ee(c.prototype,dn),(e.enable||e.disable)&&(c.prototype.formDisabledCallback=function(l){return l?e.disable&&e.disable.call(this,this[H],this[S]):e.enable&&e.enable.call(this,this[H],this[S])}),e.reset&&(c.prototype.formResetCallback=function(){return e.reset.call(this,this[H],this[S])}),e.restore&&(c.prototype.formStateRestoreCallback=function(){return e.restore.call(this,this[H],this[S])})),s&&(c.observedAttributes=Object.keys(s),c.prototype.attributeChangedCallback=function(l,p,d){if(!this._initialAttributes)return s[l].call(this,d);this._initialAttributes[l]=d,En(this,c.observedAttributes,s)}),c.prototype.connectedCallback=function(){let l=this,p=l[H],d=l[S];if(l._initialAttributes&&re(l,c.observedAttributes,s),l._initialLoad){let a=p.querySelectorAll('link[rel="stylesheet"]');if(a.length){let m=0,L=a.length,Gt=function(Ge){++m>=a.length&&(delete l._initialLoad,e.load&&(St("element()","loaded",Array.from(a).map(ze=>ze.href).join(`
`)),e.load.call(l,p)))},Be=Gt;for(;L--;)a[L].addEventListener("load",Gt,ne),a[L].addEventListener("error",Be,ne);e.connect&&e.connect.call(this,p,d)}else e.connect&&e.connect.call(this,p,d),e.load&&e.load.call(this,p,d)}else e.connect&&e.connect.call(this,p,d)},e.disconnect&&(c.prototype.disconnectedCallback=function(){return e.disconnect.call(this,this[H],this[S])}),St("element()","<"+(r?r+" is="+o:o)+">"),window.customElements.define(o,c,r&&{extends:r}),r&&!oe&&document.querySelectorAll('[is="'+o+'"]').forEach(l=>{ee(l,u),e.construct&&e.construct.apply(l);let p;for(p in s){let d=l.attributes[p];d&&s[p].call(l,d.value)}e.connect&&e.connect.apply(l)}),c}var Ln=Object.assign,Fn=/\s+/,se=0;window.addEventListener("click",t=>se=t.timeStamp);function Pn(t,e){return t.node.addEventListener(e,t,t.options),t}function An(t,e){return t.node.removeEventListener(e,t),t}function ue(t,e,n,o){this.controller=t,this.types=e.split(Fn),this.options=n,this.node=o,this.select=n&&n.select,this.types.reduce(Pn,this)}Ln(ue.prototype,{stop:function(){this.types.reduce(An,this)},handleEvent:function(t){if(!(t.type==="click"&&t.timeStamp<=se)){if(this.select){let e=t.target.closest(this.select);if(!e)return;t.selectedTarget=e}this.controller.push(t)}}});function T(t,e){let n;return typeof t=="object"&&(n=t,t=n.type),new v(o=>o.done(new ue(o,t,n,e)))}function ce(t){return t.which===1&&!t.ctrlKey&&!t.altKey&&!t.shiftKey}function On(t,e){return e[t]}var et=w(On,!0);function Lt(t){return typeof t}var kn=/^\s*([+-]?\d*\.?\d+)([^\s\d]*)\s*$/;function Cn(t,e){if(typeof e=="number")return e;var n=kn.exec(e);if(!n||!t[n[2]||""]){if(!t.catch)throw new Error('Cannot parse value "'+e+'" with provided units '+Object.keys(t).join(", "));return n?t.catch(parseFloat(n[1]),n[2]):t.catch(parseFloat(e))}return t[n[2]||""](parseFloat(n[1]))}var nt=w(Cn);var Mn=/px$/,le={"transform:translateX":function(t){var e=$("transform",t);if(!e||e==="none")return 0;var n=ot(e);return parseFloat(n[4])},"transform:translateY":function(t){var e=$("transform",t);if(!e||e==="none")return 0;var n=ot(e);return parseFloat(n[5])},"transform:scale":function(t){var e=$("transform",t);if(!e||e==="none")return 0;var n=ot(e),o=parseFloat(n[0]),r=parseFloat(n[1]);return Math.sqrt(o*o+r*r)},"transform:rotate":function(t){var e=$("transform",t);if(!e||e==="none")return 0;var n=ot(e),o=parseFloat(n[0]),r=parseFloat(n[1]);return Math.atan2(r,o)}};function ot(t){return t.split("(")[1].split(")")[0].split(/\s*,\s*/)}function $(t,e){return window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):0}function rt(t,e){if(le[t])return le[t](e);var n=$(t,e);return typeof n=="string"&&Mn.test(n)?parseFloat(n):n}var it,st;function Dn(){if(!it){let t=document.documentElement.style.fontSize;document.documentElement.style.fontSize="100%",it=rt("font-size",document.documentElement),document.documentElement.style.fontSize=t||""}return it}function Hn(){return st||(st=rt("font-size",document.documentElement)),st}window.addEventListener("resize",()=>{it=void 0,st=void 0});var j=y(Lt,{number:b,string:nt({em:function(t){return Dn()*t},px:function(t){return t},rem:function(t){return Hn()*t},vw:function(t){return window.innerWidth*t/100},vh:function(t){return window.innerHeight*t/100},vmin:function(t){return window.innerWidth<window.innerHeight?window.innerWidth*t/100:window.innerHeight*t/100},vmax:function(t){return window.innerWidth<window.innerHeight?window.innerHeight*t/100:window.innerWidth*t/100}})}),ae=j;var Ft=Object.assign,ut={threshold:4,ignoreTags:{textarea:!0,input:!0,select:!0}};function jn(t,e,n){var o=n.clientX-e.clientX,r=n.clientY-e.clientY;return!(o*o+r*r<t*t)}function pe(t,e,n){this.stream=t,this.events=e,this.options=n,this.pointerId=e[0].pointerId,this.threshold=ae(n.threshold),document.addEventListener("pointermove",this),document.addEventListener("pointerup",this),document.addEventListener("pointercancel",this),this.threshold===0&&this.createGesture()}Ft(pe.prototype,{handleEvent:y(et("type"),{pointermove:function(t){if(this.pointerId!==t.pointerId){console.log("Not the same pointer");return}this.events.push(t),!this.isGesture&&jn(this.threshold,this.events[0],t)?this.createGesture():t.preventDefault()},default:function(t){if(this.pointerId!==t.pointerId){console.log("Not the same pointer");return}this.events.push(t),this.stop()}}),createGesture:function(){this.isGesture=!0,this.stream.push(new v(t=>{t.push.apply(t,this.events),this.events=t}))},stop:function(){this.events.stop&&this.events.stop(),document.removeEventListener("pointermove",this),document.removeEventListener("pointerup",this),document.removeEventListener("pointercancel",this)}});function Bn(t){var e=t.target.tagName;return e&&(!!ut.ignoreTags[e.toLowerCase()]||t.target.draggable)}function fe(t,e,n){this.stream=t,this.node=e,this.options=n,this.node.addEventListener("pointerdown",this)}Ft(fe.prototype,{handleEvent:function(t){if(t.button===0&&!(this.options.device&&!this.options.device.includes(t.pointerType))&&!Bn(t)&&!(this.options.selector&&!t.target.closest(this.options.selector))){var e={type:t.type,target:t.target,currentTarget:t.currentTarget,clientX:t.clientX,clientY:t.clientY,timeStamp:t.timeStamp,pointerId:t.pointerId};new pe(this.stream,[e],this.options)}},stop:function(){this.node.removeEventListener("pointerdown",this)}});function Pt(t,e){return t=e&&t?Ft({},ut,t):ut,e=e||t,new v(n=>n.done(new fe(n,e,t)))}var In=Object.assign,Gn={capture:!0,passive:!0},K={minScrollEventInterval:.0375,maxScrollEventInterval:.18},de=K.maxScrollEventInterval;function zn(t){let e=t.length,n=0;for(;--e;){let o=t[e]-t[e-1];n=o>n?o:n}n=n<K.minScrollEventInterval?K.minScrollEventInterval:n,de=1.4*n>K.maxScrollEventInterval?K.maxScrollEventInterval:1.4*n}function Rn(t,e){let{times:n}=t;t.value.stop(),t.value=void 0,n.length>1&&zn(n),n.length=0}function me(t){this.element=t,this.times=[]}In(me.prototype,X.prototype,{start:function(){this.element.addEventListener("scroll",this,Gn),++v.count},handleEvent:function(t){let e=t.timeStamp/1e3;this.times.push(e),this.value?(clearTimeout(this.timer),this.value.push(t)):(this.value=v.of(t),this.target.push(this.value)),this.timer=setTimeout(Rn,de*1e3,this,t)},stop:function(){this.element.removeEventListener("scroll",scroll),X.prototype.stop.apply(this,arguments)}});function At(t){return new v(new me(t))}var Ot=Object.assign,_n=window.CustomEvent,kt={bubbles:!0,cancelable:!0};function Ct(t,e){let n;typeof t=="object"&&(n=Ot({},kt,t),t=n.type,delete n.type),e&&e.detail&&(n?n.detail=e.detail:n=Ot({detail:e.detail},kt));var o=new _n(t,n||kt);return e&&(delete e.detail,Ot(o,e)),o}function Mt(t,e){let n;typeof t=="object"&&(n=t,t=n.type,delete n.type);let o=Ct(t,n);return e.dispatchEvent(o)}var _r=w(Mt,!0);function he(t){let e=x(t),n=window.getComputedStyle(t,null),o=j(n.getPropertyValue("padding-left")),r=j(n.getPropertyValue("padding-right"));return e.leftPadding=e.left+o,e.rightPadding=e.left+e.width-r,e.centrePadding=e.leftPadding+(e.width-o-r)/2,e}function ge(t){let e=window.getComputedStyle(t,null).getPropertyValue("scroll-snap-align");return e.endsWith("start")?"left":e.endsWith("end")?"right":"centre"}function we(t,e,n){let o=he(t),r=x(e),i=ge(e);t.scrollTo({top:t.scrollTop,left:t.scrollLeft+(i==="left"?r.left-o.leftPadding:i==="right"?r.right-o.rightPadding:r.left+r.width/2-o.centrePadding),behavior:n})}function Dt(t,e,n){we(t,e,"smooth")}function Z(t,e){t.style.setProperty("scroll-behavior","auto","important"),we(t,e,"auto"),t.style.setProperty("scroll-behavior","")}function Un(t,e){let{leftPadding:n,rightPadding:o,centrePadding:r}=he(t),i=e.length,s;for(;s=e[--i];){let u=x(s);if(!u)continue;let c=ge(s),l=u.width/2+(c==="left"?n:c==="right"?o:r);if((c==="left"?u.left:c==="right"?u.right:u.left+u.width/2)<=l)break}return s}function Vn(t){return!!t.dataset.slideIndex}function N(t){let{scroller:e,children:n,elements:o}=t,r=Un(e,o),i;Vn(r)?(i=n[r.dataset.slideIndex],Z(e,i)):i=r,i!==t.active&&(t.active=i,i!==void 0&&(t.actives.push(i),Mt("slide-active",i)))}var ve=y((t,e)=>e.type,{pointerdown:function(t,e){return t.e0=e,t.x0=e.clientX,t.y0=e.clientY,t},pointermove:function(t,e){let n=e.clientX,o=e.clientY;if(!t.gesturing){if(Math.abs(n-t.x0)<Math.abs(o-t.y0)){t.pointers.stop(),t.pointers=void 0,t.e0=void 0,t.x0=void 0,t.y0=void 0;return}t.scrollLeft0=t.scroller.scrollLeft,t.scroller.style.setProperty("scroll-snap-type","none","important"),t.scroller.style.setProperty("scroll-behavior","auto","important"),t.gesturing=!0}let r=e.clientX-t.x0;return t.scroller.scrollLeft=t.scrollLeft0-r,t},default:function(t,e){let n=t.scroller;t.clickSuppressTime=e.timeStamp;let o=n.scrollLeft;n.style.setProperty("scroll-snap-type","");let r=n.scrollLeft;if(o===r)n.style.setProperty("scroll-behavior","");else{N(t),n.style.setProperty("scroll-snap-type","none","important"),n.scrollLeft=o,n.style.setProperty("scroll-behavior",""),n.scrollTo({top:n.scrollTop,left:r,behavior:"smooth"});let i,s=T({type:"scroll",passive:!0},n).each(()=>{cancelAnimationFrame(i),i=requestAnimationFrame(()=>i=requestAnimationFrame(()=>{n.style.setProperty("scroll-snap-type",""),s.stop()}))})}return t.gesturing=!1,t.e0=void 0,t.x0=void 0,t.y0=void 0,t.pointers=void 0,t.scrollLeft0=void 0,t}});var qn=nt({s:b,ms:t=>t/1e3});function Nn(t){let{active:e,children:n,elements:o,host:r}=t,i=o.indexOf(e),s=o[i+1]||n[0];t.autoplay.timer=null,!!s&&(r.active=s)}function Wn(t){let{active:e,style:n}=t,o=qn(window.getComputedStyle(e).getPropertyValue("--slide-duration")||n.getPropertyValue("--slide-duration"));clearTimeout(t.autoplay.timer),t.autoplay.timer=setTimeout(Nn,o*1e3,t)}function ye(t){clearTimeout(t.autoplay.timer),t.autoplay.timer=null}function be(t){let{actives:e,host:n}=t,o=t.autoplay={},r=v.merge([!1],T("pointerenter pointerleave",n).map(s=>s.type==="pointerenter")),i=v.merge([n.contains(document.activeElement)],T("focusin focusout",n).map(y(et("type"),{focusin:s=>!0,focusout:s=>n.contains(s.relatedTarget)}))).map((s=>u=>s===u?void 0:s=u)());o.updates=v.combine({active:e,hover:r,focus:i}).each(s=>s.hover||s.focus?ye(t):Wn(t))}function xe(t){ye(t),t.autoplay.updates.stop(),t.autoplay=void 0}var Ee=2400;function Se(t,e){let n=t.cloneNode(!0);return n.dataset.slideIndex=e,n.removeAttribute("id"),n.setAttribute("aria-hidden","true"),n.tabIndex="-1",n}function Te(t){return!t.dataset.slideIndex}function Xn(t){let{active:e,children:n,host:o,scroller:r}=t;if(n.length<2)return;let i=n.map(x),s=i[0].left,u=i[i.length-1].right,c=0;for(;i[++c]&&i[c].left<s+Ee;);let l=n.slice(0,c).map(Se);for(c=i.length-1;i[--c]&&i[c].right>u-Ee;);let p=n.slice(++c).map((d,a)=>Se(d,c+a));o.prepend.apply(o,p),o.append.apply(o,l),t.loop.prepends=p,t.loop.appends=l,Z(r,e||n[0])}function Ht(t){let{mutations:e}=t,n=t.loop={};!t.loaded||(n.mutations=e.map(o=>o).each(()=>Xn(t)))}function jt(t){t.loop&&(t.loop.prepends&&t.loop.prepends.forEach(e=>e.remove()),t.loop.appends&&t.loop.appends.forEach(e=>e.remove()),t.loop.mutations.stop(),t.loop=void 0)}function W(t){if(!t.controls){let e=g("nav",{part:"controls"});t.shadow.append(e),t.controls=e}}function Fe(t,e,n,o){o===0?t.hidden=!0:t.hidden=!1,o===n.length-1?e.hidden=!0:e.hidden=!1}function Le(t){let{active:e,elements:n,navigation:{prev:o,next:r}}=t,i=n.indexOf(e);Fe(o,r,n,i)}function Pe(t,e){let{host:n,actives:o,clicks:r,mutations:i}=t;W(t);let s=t.navigation={prev:g("button",{part:"prev-button",type:"button",name:"navigation",value:"-1",html:"Previous"}),next:g("button",{part:"next-button",type:"button",name:"navigation",value:"1",html:"Next"})};t.controls.prepend(s.prev,s.next),s.mutations=i.each(()=>Le(t)),s.actives=o.each(()=>Le(t)),s.clicks=r.each(D({'[name="navigation"]':function(u,c){let l=parseFloat(u.value),p=t.elements.indexOf(t.active)+l,d=t.elements[p];!d||(n.active=d,Fe(s.prev,s.next,t.elements,p))}}))}function Ae(t){t.navigation.prev.remove(),t.navigation.next.remove(),t.navigation.mutations.stop(),t.navigation.actives.stop(),t.navigation.clicks.stop(),t.navigation=void 0}function Oe(t,e,n){let{active:o,buttons:r,index:i}=t;if(o===n)return;i>-1&&(t.activeSpan.remove(),r.children[i].part.remove("page-button-active"));let s=e.indexOf(n);s!==-1&&(r.children[s].part.add("page-button-active"),r.children[s].append(t.activeSpan),t.index=s,t.active=n)}function Yn(t,e,n,o){e.buttons&&(e.buttons.remove(),e.buttons=void 0),!(o.length<2)&&(e.buttons=g("div",{part:"pagination",children:o.map((r,i)=>g("button",{part:"page-button",type:"button",name:"pagination",value:i}))}),t.append(e.buttons))}function ke(t,e){let{shadow:n,actives:o,clicks:r,mutations:i}=t;W(t);let s=t.pagination={activeSpan:g("span",{class:"invisible",text:"(Current slide)"})};s.mutations=i.each(()=>Yn(t.controls,s,n,t.children.filter(u=>!u.dataset.slideIndex))),s.actives=o.each(()=>Oe(s,t.children.filter(u=>!u.dataset.slideIndex),t.active)),s.clicks=r.each(D({'[name="pagination"]':function(u,c){let{host:l}=t,p=t.children.filter(a=>!a.dataset.slideIndex),d=p[u.value];!d||(l.active=d,Oe(s,p,d))}}))}function Ce(t){t.pagination.buttons.remove(),t.pagination.mutations.stop(),t.pagination.actives.stop(),t.pagination.clicks.stop(),t.pagination=void 0}var Me=document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled;function Bt(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}function De(t){return t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():void 0}function ct(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}function He(t,e){let{host:n}=t;if(!Me)return;W(t);let o=t.fullscreen={button:g("button",{part:"fullscreen-button",type:"button",name:"fullscreen",html:"Open in fullscreen"})};t.controls.append(o.button),o.clicks=t.clicks.each(D({'[name="fullscreen"]':(r,i)=>{let s=Bt();if(s===n){ct(),o.button.part.remove("fullscreen-button-active"),o.button.innerHTML="Open in fullscreen";return}s&&ct(),De(n),o.button.part.add("fullscreen-button-active"),o.button.innerHTML="Close fullscreen"}}))}function je(t){let{host:e}=t;Bt()===e&&ct(),t.fullscreen.button.remove(),t.fullscreen.clicks.stop(),t.fullscreen=void 0}var P=Symbol("data");function $n(t,e,n){let o=n.length,r=-1/0;for(;o--;){let l=x(n[o]),p=l.x+l.width;r=p>r?p:r}let i=x(e),s=getComputedStyle(t),u=j(s.paddingLeft),c=j(s.paddingRight);return u+c+r-i.x}function It(t,e,n){let o=$n(t,e,n);t.style.setProperty("--scroll-width",o+"px")}var Kn={stylesheet:window.customElementStylesheetPath&&window.customElementStylesheetPath+"slide-show.shadow.css"||window.elementSlideShowStylesheet||import.meta.url.replace(/\/[^\/]*([?#].*)?$/,"/")+"shadow.css",construct:function(t){let e=g("slot",{part:"slides"}),n=g("div",{class:"scroller",children:[e]});t.append(n);let o=T("slotchange",e).broadcast(),r=v.of().broadcast({memory:!0}),i=T("click",t).filter(ce).broadcast(),s=T("focusin",this),u=T("resize",window),c=T("fullscreenchange",window),l=At(n),p=Pt({threshold:"0.25rem",device:"mouse"},t).filter(()=>a.children.length>1),d=v.of().broadcast({memory:!0}),a=this[P]={clickSuppressTime:-1/0,host:this,style:window.getComputedStyle(this),elements:dt,children:dt,shadow:t,scroller:n,slides:e,actives:d,slotchanges:o,mutations:r,clicks:i};o.each(()=>{let m=e.assignedElements();a.elements=m,It(a.scroller,a.slides,a.elements);let L=a.elements.filter(Te);qt(a.children,L)||(a.children=L,r.push(L))}),u.each(()=>It(a.scroller,a.slides,a.elements)),i.each(function(m){window.performance.now()-a.clickSuppressTime<120&&(m.preventDefault(),m.stopPropagation())}),p.each(m=>{a.pointers=m,m.reduce(ve,a)}),c.each(m=>{(m.target===this||m.target.contains(this))&&Z(n,a.active)}),l.each(m=>m.each(h).done(()=>N(a))),s.map(m=>a.children.indexOf(m.target)!==-1?m.target:a.children.find(L=>L.contains(m.target))).each(m=>Dt(a.scroller,m))},load:function(t){let e=this[P];e.loaded=!0,this.loop?Ht(e):jt(e),It(e.scroller,e.slides,e.elements),N(e),e.slotchanges.each(()=>N(e))}},Zn={active:{set:function(t){let e=this[P],n=typeof t!="object"?this.querySelector("#"+(/^\d/.test((id+"")[0])?"\\3"+(id+"")[0]+" "+(id+"").slice(1):t)):t;if(!n)throw new Error("Cannot set active – not a child of slide-show");Dt(e.scroller,n)},get:function(){return this[P].active}},autoplay:{attribute:function(t){this.autoplay=t!==null},set:function(t){let e=this[P];return!t==!e.autoplay?void 0:t?be(e):xe(e)},get:function(){return!!this[P].autoplay}},controls:{attribute:function(t){let e=this[P],n,o,r;if(typeof t=="string"&&t!==""){let i=t.split(/\s+/);n=i.includes("navigation"),o=i.includes("pagination"),r=i.includes("fullscreen")}else{let i=t!==null;n=i,o=i,r=i}!!n!=!!e.navigation&&(n?Pe(e):Ae(e)),!!o!=!!e.pagination&&(o?ke(e):Ce(e)),!!r!=!!e.fullscreen&&(r?He(e):je(e))}},loop:{attribute:function(t){this.loop=t!==null},set:function(t){let e=this[P];return!t==!e.loop?void 0:t?Ht(e):jt(e)},get:function(){return!!this[P].loop}},previous:{value:function(){console.log("Todo: advance slide")}},next:{value:function(){console.log("Todo: back slide")}}},ts=Tt("slide-show",Kn,Zn);export{ts as default};
//# sourceMappingURL=element.js.map
